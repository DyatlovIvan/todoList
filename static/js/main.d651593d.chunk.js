(this.webpackJsonptodolist1=this.webpackJsonptodolist1||[]).push([[0],{121:function(t,e,n){},122:function(t,e,n){},148:function(t,e,n){"use strict";n.r(e);var i,a,o=n(0),c=n.n(o),s=n(31),r=n.n(s),d=(n(121),n(122),n(205)),l=n(206),u=n(207),j=n(204),f=n(201),b=n(208),O=n(209),p=n(16),m=n(21),h=n(94),x=n.n(h).a.create(Object(m.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"d7bfc3c8-2c2d-429a-afe3-69f3367ec679"}}));!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Complete=2]="Complete",t[t.Draft=3]="Draft"}(i||(i={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(a||(a={}));var g,L=function(){return x.get("todo-lists")},v=function(t){return x.post("todo-lists",{title:t})},k=function(t){return x.delete("todo-lists/".concat(t))},y=function(t,e){return x.put("todo-lists/".concat(t),{title:e})},I=function(t){return x.get("todo-lists/".concat(t,"/tasks"))},w=function(t,e){return x.post("todo-lists/".concat(t,"/tasks"),{title:e})},C=function(t,e){return x.delete("todo-lists/".concat(t,"/tasks/").concat(e))},T=function(t,e,n){return x.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},S=function(t){return x.post("auth/login",t)},D=function(){return x.delete("auth/login")},F=function(){return x.get("auth/me")},E=function(t,e){t.messages.length?e(H({error:t.messages[0]})):e(H({error:"Some error"})),e(Z({status:g.Failed}))},A=function(t,e){e(H(t.message?{error:t.message}:{error:"Some error"})),e(Z({status:g.Failed}))},N=n(33),_=Object(N.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload.value}}}),B=_.reducer,P=_.actions.setIsLoggedIn;!function(t){t.Idle="idle",t.Loading="loading",t.Succeeded="succeeded",t.Failed="failed"}(g||(g={}));var z={status:g.Idle,error:null,isInitialized:!1},M=Object(N.b)({name:"app",initialState:z,reducers:{setError:function(t,e){t.error=e.payload.error},setStatus:function(t,e){t.status=e.payload.status},setAppInitialized:function(t,e){t.isInitialized=e.payload.isInitialized}}}),R=M.reducer,U=M.actions,H=U.setError,Z=U.setStatus,q=U.setAppInitialized,J=Object(N.b)({name:"todolists",initialState:[],reducers:{removeTodolist:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todoListID}));n>-1&&t.splice(n,1)},addNewTodolist:function(t,e){t.unshift(Object(m.a)(Object(m.a)({},e.payload.todolist),{},{filter:"all",entityStatus:g.Idle}))},updateTodolistTitle:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todoListID}));t[n].title=e.payload.title},changeFilterTodoListAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todoListID}));t[n].filter=e.payload.filter},setTodoLists:function(t,e){return e.payload.todoLists.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{filter:"all",entityStatus:g.Idle})}))},changeTodolistEntityStatus:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todoListID}));t[n].entityStatus=e.payload.status}}}),K=J.reducer,W=J.actions,$=W.removeTodolist,G=W.addNewTodolist,V=W.updateTodolistTitle,Y=W.changeFilterTodoListAC,Q=W.setTodoLists,X=W.changeTodolistEntityStatus,tt=Object(N.b)({name:"tasks",initialState:{},reducers:{removeTask:function(t,e){var n=t[e.payload.todoListID],i=n.findIndex((function(t){return t.id===e.payload.id}));i>-1&&n.splice(i,1)},addNewTask:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTask:function(t,e){var n=t[e.payload.todoListID],i=n.findIndex((function(t){return t.id===e.payload.id}));i>-1&&(n[i]=Object(m.a)(Object(m.a)({},n[i]),e.payload.model))},setTask:function(t,e){t[e.payload.todoListID]=e.payload.tasks}},extraReducers:function(t){t.addCase(G,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase($,(function(t,e){delete t[e.payload.todoListID]})),t.addCase(Q,(function(t,e){e.payload.todoLists.forEach((function(e){t[e.id]=[]}))}))}}),et=tt.reducer,nt=tt.actions,it=nt.removeTask,at=nt.addNewTask,ot=nt.updateTask,ct=nt.setTask,st=function(t,e,n){return function(i,a){i(Z({status:g.Loading}));var o=a().Tasks[t].find((function(t){return t.id===e}));if(o){var c=Object(m.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n);T(t,e,c).then((function(a){0===a.data.resultCode?i(ot({todoListID:t,id:e,model:n})):E(a.data,i)})).catch((function(t){A(t,i)})).finally((function(){i(Z({status:g.Succeeded}))}))}else console.warn("Task not found")}},rt=n(197),dt=n(199),lt=n(13),ut=n(49),jt=n(190),ft=n(200),bt=n(187),Ot=n(1),pt=c.a.memo((function(t){var e=t.callBack,n=t.disabled,i=void 0!==n&&n,a=(Object(ut.a)(t,["callBack","disabled"]),Object(o.useState)("")),c=Object(lt.a)(a,2),s=c[0],r=c[1],d=Object(o.useState)(null),l=Object(lt.a)(d,2),u=l[0],j=l[1];return Object(Ot.jsxs)("div",{children:[Object(Ot.jsx)(jt.a,{label:"type text",value:s,onChange:function(t){j(null),r(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(e(s),r(""))},error:!!u,helperText:u,disabled:i}),Object(Ot.jsx)(ft.a,{onClick:function(){""!==s.trim()?(e(s),r("")):j("Error")},color:"primary",disabled:i,children:Object(Ot.jsx)(bt.a,{})})]})})),mt=n(79),ht=n.n(mt),xt=c.a.memo((function(t){var e=t.title,n=t.status,a=t.callBack,c=(Object(ut.a)(t,["title","status","callBack"]),Object(o.useState)(!1)),s=Object(lt.a)(c,2),r=s[0],d=s[1],l=Object(o.useState)(e),u=Object(lt.a)(l,2),j=u[0],f=u[1];return r?Object(Ot.jsx)(jt.a,{value:j,onChange:function(t){f(t.currentTarget.value)},className:n===i.Complete?ht.a.isDone:"",onBlur:function(){d(!1),a(j.trim())},autoFocus:!0}):Object(Ot.jsx)("span",{onDoubleClick:function(){return d(!0)},className:n===i.Complete?ht.a.isDone:"",children:e})})),gt=n(103),Lt=n(198),vt=n(188),kt=n(192),yt=c.a.memo((function(t){var e=t.task,n=t.todoListID,a=Object(p.b)(),c=Object(o.useCallback)((function(t,e){var o=e.currentTarget.checked;a(st(n,t,{status:o?i.Complete:i.New}))}),[n,a]),s=Object(o.useCallback)((function(t,e){a(st(n,t,{title:e}))}),[n,a]),r=Object(o.useCallback)((function(t){a(function(t,e){return function(n){n(Z({status:g.Loading})),C(t,e).then((function(i){n(it({todoListID:t,id:e})),n(Z({status:g.Succeeded}))}))}}(n,t))}),[n,a]);return Object(Ot.jsxs)("div",{children:[Object(Ot.jsx)(kt.a,{onChange:function(t){return c(e.id,t)},checked:e.status===i.Complete}),Object(Ot.jsx)(xt,{title:e.title,status:e.status,callBack:function(t){return s(e.id,t)}}),Object(Ot.jsx)(ft.a,{onClick:function(){return r(e.id)},children:Object(Ot.jsx)(vt.a,{})})]})})),It=Object(gt.a)({palette:{primary:{main:"#ff9800"}}}),wt=c.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,a=Object(ut.a)(t,["demo"]),c=Object(p.b)();Object(o.useEffect)((function(){var t;n||c((t=a.todoList.id,function(e){e(Z({status:g.Loading})),I(t).then((function(n){e(ct({tasks:n.data.items,todoListID:t})),e(Z({status:g.Succeeded}))}))}))}),[]);var s=Object(o.useCallback)((function(t){return a.changeFilter(a.todoList.id,t)}),[a.changeFilter,a.todoList.id]),r=Object(o.useCallback)((function(t){a.addNewTask(a.todoList.id,t)}),[a.addNewTask,a.todoList.id]),d=Object(o.useCallback)((function(t){a.updateTodolistTitle(a.todoList.title,t)}),[a.updateTodolistTitle,a.todoList.id]),l=a.task;"active"===a.todoList.filter&&(l=a.task.filter((function(t){return t.status===i.New}))),"completed"===a.todoList.filter&&(l=a.task.filter((function(t){return t.status===i.Complete})));var u=l.map((function(t){return Object(Ot.jsx)(yt,{task:t,todoListID:a.todoList.id},t.id)}));return Object(Ot.jsxs)("div",{children:[Object(Ot.jsxs)("h3",{children:[Object(Ot.jsx)(xt,{title:a.todoList.title,callBack:d}),Object(Ot.jsx)(ft.a,{onClick:function(){a.removeTodolist(a.todoList.id)},disabled:"loading"===a.todoList.entityStatus,children:Object(Ot.jsx)(vt.a,{})})]}),Object(Ot.jsx)(pt,{callBack:r,disabled:"loading"===a.todoList.entityStatus}),Object(Ot.jsx)("div",{children:u}),Object(Ot.jsxs)("div",{children:[Object(Ot.jsx)(f.a,{variant:"all"===a.todoList.filter?"contained":"text",onClick:function(){s("all")},children:"all"}),Object(Ot.jsx)(Lt.a,{theme:It,children:Object(Ot.jsx)(f.a,{color:"primary",variant:"active"===a.todoList.filter?"contained":"text",onClick:function(){s("active")},children:"active"})}),Object(Ot.jsx)(f.a,{color:"secondary",variant:"completed"===a.todoList.filter?"contained":"text",onClick:function(){s("completed")},children:"completed"})]})]})})),Ct=n(14),Tt="/login",St="/",Dt=function(t){var e=t.demo,n=void 0!==e&&e,i=Object(p.b)(),a=Object(Ct.f)(),c=Object(p.c)((function(t){return t.TodoLists})),s=Object(p.c)((function(t){return t.Tasks}));Object(p.c)((function(t){return t.Login.isLoggedIn}))||a(Tt),Object(o.useEffect)((function(){n||i((function(t){t(Z({status:g.Loading})),L().then((function(e){t(Q({todoLists:e.data})),t(Z({status:g.Succeeded}))})).catch((function(e){A(e,t)}))}))}),[n,i]);var r=Object(o.useCallback)((function(t){i(function(t){return function(e){return e(Z({status:g.Loading})),v(t).then((function(t){0===t.data.resultCode?e(G({todolist:t.data.data.item})):E(t.data,e)})).catch((function(t){A(t,e)})).finally((function(){e(Z({status:g.Succeeded}))}))}}(t))}),[i]),d=Object(o.useCallback)((function(t){var e;i((e=t,function(t){return t(Z({status:g.Loading})),t(X({todoListID:e,status:g.Loading})),k(e).then((function(n){t($({todoListID:e})),t(Z({status:g.Succeeded}))}))}))}),[i]),l=Object(o.useCallback)((function(t,e){i(function(t,e){return function(n){return n(Z({status:g.Loading})),y(t,e).then((function(i){n(V({todoListID:t,title:e})),n(Z({status:g.Succeeded}))}))}}(t,e))}),[i]),u=Object(o.useCallback)((function(t,e){i(Y({todoListID:t,filter:e}))}),[i]),j=Object(o.useCallback)((function(t,e){i(function(t,e){return function(n){n(Z({status:g.Loading})),w(t,e).then((function(t){0===t.data.resultCode?n(at({task:t.data.data.item})):E(t.data,n)})).catch((function(t){A(t,n)})).finally((function(){n(Z({status:g.Succeeded}))}))}}(t,e))}),[i]);return Object(Ot.jsxs)(Ot.Fragment,{children:[Object(Ot.jsx)(rt.a,{style:{padding:"20px"},children:Object(Ot.jsx)(pt,{callBack:r,disabled:!1})}),Object(Ot.jsx)(rt.a,{container:!0,spacing:3,children:c.map((function(t){return Object(Ot.jsx)(rt.a,{item:!0,children:Object(Ot.jsx)(dt.a,{style:{padding:"10px"},children:Object(Ot.jsx)(wt,{todoList:t,task:s[t.id],changeFilter:u,addNewTask:j,removeTodolist:d,updateTodolistTitle:l,demo:n},t.id)})})}))})]})},Ft=n(194),Et=n(193),At=o.forwardRef((function(t,e){return Object(Ot.jsx)(Et.a,Object(m.a)({elevation:6,ref:e,variant:"filled"},t))})),Nt=function(){var t=Object(p.c)((function(t){return t.App.error})),e=Object(p.b)(),n=null!==t,i=function(t,n){"clickaway"!==n&&e(H({error:null}))};return Object(Ot.jsx)(Ft.a,{open:n,autoHideDuration:6e3,onClose:i,children:Object(Ot.jsx)(At,{onClose:i,severity:"error",sx:{width:"100%"},children:t})})},_t=n(62),Bt=n(102),Pt=n(195),zt=n(185),Mt=n(202),Rt=n(203),Ut=function(){var t=Object(p.c)((function(t){return t.Login.isLoggedIn})),e=Object(Ct.f)(),n=Object(p.b)();t&&e("/");var i=Object(Bt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password?t.password.length<3&&(e.password="Invalid password"):e.password="Password is required",e},onSubmit:function(t){var e;n((e=t,function(t){t(Z({status:g.Loading})),S(e).then((function(e){0===e.data.resultCode?t(P({value:!0})):E(e.data,t)})).catch((function(e){A(e,t)})).finally((function(){t(Z({status:g.Succeeded}))}))})),i.resetForm()}});return Object(Ot.jsx)(rt.a,{container:!0,justifyContent:"center",children:Object(Ot.jsx)(rt.a,{item:!0,justifyContent:"center",children:Object(Ot.jsx)("form",{onSubmit:i.handleSubmit,children:Object(Ot.jsxs)(Pt.a,{children:[Object(Ot.jsxs)(zt.a,{children:[Object(Ot.jsxs)("p",{children:["To log in get registered",Object(Ot.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(Ot.jsx)("p",{children:"or use common test account credentials:"}),Object(Ot.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(Ot.jsx)("p",{children:"Password: free"})]}),Object(Ot.jsxs)(Mt.a,{children:[Object(Ot.jsx)(jt.a,Object(m.a)({label:"Email",margin:"normal"},i.getFieldProps("email"))),i.touched.email&&i.errors.email&&Object(Ot.jsx)("div",{children:i.errors.email}),Object(Ot.jsx)(jt.a,Object(m.a)({type:"password",label:"Password",margin:"normal"},i.getFieldProps("password"))),i.touched.password&&i.errors.password&&Object(Ot.jsx)("div",{children:i.errors.password}),Object(Ot.jsx)(Rt.a,Object(m.a)({label:"Remember me",control:Object(Ot.jsx)(kt.a,{})},i.getFieldProps("rememberMe"))),Object(Ot.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},Ht=function(t){var e=t.demo,n=void 0!==e&&e,i=Object(p.b)(),a=Object(p.c)((function(t){return t.App.status})),c=Object(p.c)((function(t){return t.App.isInitialized})),s=Object(p.c)((function(t){return t.Login.isLoggedIn}));if(Object(o.useEffect)((function(){i((function(t){F().then((function(e){0===e.data.resultCode?t(P({value:!0})):E(e.data,t)})).finally((function(){t(q({isInitialized:!0}))}))}))}),[]),!c)return Object(Ot.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(Ot.jsx)(d.a,{})});return Object(Ot.jsx)(_t.a,{children:Object(Ot.jsxs)("div",{className:"App",children:[Object(Ot.jsxs)(l.a,{position:"static",children:[Object(Ot.jsx)(Nt,{}),Object(Ot.jsxs)(u.a,{children:[Object(Ot.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Todolist"}),s&&Object(Ot.jsx)(f.a,{color:"inherit",onClick:function(){i((function(t){t(Z({status:g.Loading})),D().then((function(e){0===e.data.resultCode?t(P({value:!1})):E(e.data,t)})).catch((function(e){A(e,t)})).finally((function(){t(Z({status:g.Succeeded}))}))}))},children:"Log out"})]}),a===g.Loading&&Object(Ot.jsx)(b.a,{})]}),Object(Ot.jsx)(O.a,{children:Object(Ot.jsxs)(Ct.c,{children:[Object(Ot.jsx)(Ct.a,{path:St,element:Object(Ot.jsx)(Dt,{demo:n})}),Object(Ot.jsx)(Ct.a,{path:Tt,element:Object(Ot.jsx)(Ut,{})})]})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zt=n(29),qt=n(56),Jt=Object(Zt.b)({TodoLists:K,Tasks:et,App:R,Login:B}),Kt=Object(N.a)({reducer:Jt,middleware:function(t){return t().prepend(qt.a)}});window.store=Kt,r.a.render(Object(Ot.jsx)(p.a,{store:Kt,children:Object(Ot.jsx)(Ht,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,n){t.exports={error:"todoList_error__1UehC",errorMessage:"todoList_errorMessage__3f1sT",activeFilter:"todoList_activeFilter__sS3jS",isDone:"todoList_isDone__2yBgv"}}},[[148,1,2]]]);
//# sourceMappingURL=main.d651593d.chunk.js.map